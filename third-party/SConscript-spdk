Import('env')

spdk_libs = [
    'libspdk_app_rpc.a',
    'libspdk_bdev.a',
    'libspdk_bdev_aio.a',
    'libspdk_bdev_malloc.a',
    'libspdk_bdev_null.a',
    'libspdk_bdev_nvme.a',
    'libspdk_bdev_rpc.a',
    'libspdk_bdev_virtio.a',
    'libspdk_blob.a',
    'libspdk_blob_bdev.a',
    'libspdk_blobfs.a',
    'libspdk_conf.a',
    'libspdk_copy.a',
    'libspdk_copy_ioat.a',
    'libspdk_cunit.a',
    'libspdk_env_dpdk.a',
    'libspdk_event.a',
    'libspdk_event_bdev.a',
    'libspdk_event_copy.a',
    'libspdk_event_iscsi.a',
    'libspdk_event_net.a',
    'libspdk_event_scsi.a',
    'libspdk_event_vhost.a',
    'libspdk_ioat.a',
    'libspdk_iscsi.a',
    'libspdk_json.a',
    'libspdk_jsonrpc.a',
    'libspdk_log.a',
    'libspdk_log_rpc.a',
    'libspdk_lvol.a',
    'libspdk_nbd.a',
    'libspdk_net.a',
    'libspdk_nvme.a',
    'libspdk_nvmf.a',
    'libspdk_rpc.a',
    'libspdk_rte_vhost.a',
    'libspdk_scsi.a',
    'libspdk_spdk_mock.a',
    'libspdk_trace.a',
    'libspdk_util.a',
    'libspdk_vbdev_error.a',
    'libspdk_vbdev_gpt.a',
    'libspdk_vbdev_lvol.a',
    'libspdk_vbdev_split.a',
    'libspdk_vhost.a'
]

spdk_libs_files = []
for lib_entry in spdk_libs:
    spdk_libs_files.append(File("#third-party/spdk/build/lib/%s" % lib_entry))

buildSPDK = env.Command(spdk_libs_files, "", 'cd %s && ./configure && make' % Dir('#third-party/spdk').abspath)
