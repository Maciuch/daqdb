Import('env')

testProgram = env.Program('dragonTest',
            source = [Glob('*.cpp'), Glob('dht/*.cpp')], 
            LIBS=["pthread",
                "rt",
                "dht",
                File("#/src/3rd/cChord/libmymed.a"),
                "boost_unit_test_framework",
                "dl",
                "boost_program_options",
                "boost_system",
                "boost_filesystem"],
	    LIBPATH=["#lib","#src/3rd/cChord","#build/src/dht"])

logging_option = ' --color_output=yes'
if env["VERBOSE"]:
	logging_option += ' --log_level=all'

test_alias = Alias('test', [testProgram], testProgram[0].path + logging_option)


AlwaysBuild(test_alias)
