Import('env')

env.AppendUnique(LIBPATH=[Dir('.')])
env.Append(CPPPATH = [Dir('.')])

benchTarget = env.Program('benchmark', Glob('*.cpp'), 
            LIBS=["pthread",
                "log4cxx",
                "boost_program_options",
                "boost_system",
                "boost_filesystem",
                "boost_thread",
                "boost_timer",
                "boost_regex",
                File("#/src/3rd/cpu-stat/libcpu-stat.a"),
                File("#/src/3rd/csvpp/libcsvpp.a")
                ])

copyBenchTarget = Command(target = "#/benchmark",
        source = benchTarget,
        action = Copy("$TARGET", "$SOURCE"))

env.Depends(copyBenchTarget, benchTarget)
env.Clean('#/benchmark', 'benchmark')
