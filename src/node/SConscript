Import('env')

env.AppendUnique(LIBPATH=[Dir('.')])
DragonTarget = env.Program('dragon', Glob('*.cpp'), 
            LIBS=["pthread",
                "rt",
                "dht",
                "store",
                File("#/src/3rd/cChord/libmymed.a"),
                "dl",
                "log4cxx",
                "boost_program_options",
                "boost_system",
                "boost_filesystem",
                "boost_thread",
                File("#/src/3rd/pmemkv/bin/libpmemkv.so"),
                File("#/src/3rd/linenoise/liblinenoise.a"),
                ])

copyDragonTarget = Command(target = "#/dragon",
        source = DragonTarget,
        action = Copy("$TARGET", "$SOURCE"))

env.Depends(copyDragonTarget, DragonTarget)
env.Clean('#/dragon', 'dragon')
